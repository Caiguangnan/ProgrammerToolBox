### 一、Lattice包

#### 1.1 介绍

![image-20200311191100667](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230629.png)

#### 1.2 图形参数

![image-20200311201049586](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230621.png)

#### 1.3 散点图

```R
library(lattice)
xyplot(wt~3.5407*mpg,data=mtcars,ylab='Weight',xlab='kilometers',main='使用Lattice包绘制散点图') #~连接
```

#### 1.4 重设字体参数

```R
name(trellis.par.get()) #获取参数列表
op <- trellis.par.get() #保存原始参数
trellis.par.get('fontsize') #查看字体大小
trellis.par.set(fontsize=list(text=20,points=20)) #修改参数
xyplot(wt~mpg,data=mtcars,xlab='Weight',ylab='miles per gallon',main='使用lattice包绘制散点图')
#还原参数值
trellis.par.set(op)
```

图形化显示参数：

```R
show.settings()
```

#### 1.5 多个类别（画图）

![image-20200311202438677](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230721.png)

```R
data <- data.frame(x=1:15,y=11:25,z=rep(c('a','b','c'),5))
xyplot(y~x,data=data,groups=z) #groups类别
```

#### 1.6 条件变量

![image-20200312181626665](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230735.png)

```R
library(lattice)
attach(iris)
xyplot(Sepal.Length~Sepal.Width|Species) #符号|是通道，每个类别画到一个栏里面
datach(iris)
```

运行结果可以看下图。

#### 1.7 栅栏图（通道）

```R
library(lattice)
attach(iris)
xyplot(Sepal.Length~Sepal.Width|Species) #符号|是通道，每个类别画到一个栏里面
datach(iris)
```

![image-20200312181443943](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230610.png)

#### 1.8 面板函数

![image-20200312182204869](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230745.png)

```R
#创建面板函数
my_panel <- function(x,y){
    panel.lmlime(x,y,col='red',lwd=1,lty=2) #回归线
    panel.loess(x,y) #光滑曲线
    panel.grid(h=-1,v=-1) #网格线
    panel.rug(x,y) #轴须线
    panel.xyplot(x,y)
}
xyplot(mpg~wt,data=mtcars,xlab='weight',
       ylab='miles per gallon',
       main='miles per gallon on weight',
       panel=my_panel) #设置面板
```

![image-20200312182959917](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230604.png)



#### 1.9 分组变量

![image-20200312183049034](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230604.png)

```R
xyplot(Sepal.Length~Sepal.Width,
       group=Sepcies,data=iris,
      main='Sepal.Length VS Sepal.Width',
      key= list(space='right',title='Species',cex=1,
                text=list(levels(factor(iris$Species))),
               points=list(pch=1:3,col=1:3)))
```

![image-20200312183719414](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230546.png)

#### 1.10 图形组合

![image-20200312183859645](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230538.png)

```R
graph1 <- xyplot(Sepal.Length~Sepal.Width|Secies,data=iris,mian='栅栏图') #类别为条件,类似分组条件 
graph2 <- xyplot(Sepal.Length~Sepal.Width,groups=Species,data=iris,mian='散点图1') #类别为条件 
graph3 <- xyplot(Sepal.Length~Sepal.Width,groups=Species,data=iris,mian='散点图2') #类别为条件 

#组合上面三个图（组合方式一）较为简单
plot(graph1,split=c(1,1,3,1))#放在第一行第一列，一共是三列一行
plot(graph2,split=c(2,1,3,1),newpage=FALSE) #newpage属性：是否覆盖上一张图
plot(graph3,split=c(3,1,3,1),newpage=FALSE) #放在第一行第三列

#或者（组合方式二）
plot(graph1,position=c(0,0,1/3,1))
plot(graph1,position=c(1/3,0,2/3,1),newpage=FALSE)
plot(graph1,position=c(2/3,0,1,1),newpage=FALSE)


```

![image-20200312185327876](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230811.png)

### 二、绘制图形

#### 2.1 基本函数

![image-20200312185520543](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230819.png)

#### 2.2 通用函数表达式

![image-20200312185628277](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315233047.png)

#### 2.3 参见参数

![image-20200312185715763](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230830.png)

![image-20200312185747026](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230843.png)



#### 2.4 条形图(barchart函数)

![image-20200312185842715](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230850.png)

```R
barchart(VADeaths,main='Death rates in 1940 Virginia') #1940年死亡率、
barchart(VADeaths,groups=FALSE,mian=list('Death rates in 1940 Virginia',cex=1.2)) #字体大小1.2。男性女性分开统计

#对泰塔尼克号数据进行处理
str(Titanic) 
as.data.frame(Titanic) #转换成DataFrame
#左图：默认条形图
pic1 <- barchart(Class~Freq|Age+Sex,data=as.data.frame(Titanic),
                 groups=Survice,stack=TRUE,
                 auto.key=list(title='Survices',colums=2)) #图例
pic2 <- barchart(Class~Freq|Age+Sex,data=as.data.frame(Titanic),
                 groups=Survived,stack=TRUE,
                 auto.key=list(title='Survices',colums=2,#图例
                 scales=list(x='free'))) #中图，将x轴坐标设置为free的条形图
#修改元素
pic3 <- update(pic2,panel=function(...){
    panel.grid(h=0,v=-1)
    panel.barchart(...,border='transparent')
})
plot(pic1,split=c(1,1,3,1))
plot(pic2,split=c(2,1,3,1),newpage=FALSE)
plot(pic3,split=c(3,1,3,1)newpage=FALSE)
```

![image-20200312190023193](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230856.png)

![image-20200312191944684](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230911.png)

#### 2.5 点图（dotplot函数）

![image-20200312195728241](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315233103.png)

```R
#普通点图
dotplot(VADeaths,pch=1:4,xlab='Death rates per 1000',
        main=list('Death rates in 1940 virginia',cex=0.8),
      key=list(columns=4,text=list(colnames(VADeaths),points=list(pch=1:4,col=1:4))))

#画板点图
dotplot(VADeaths,groups=FALSE,xlab='Death rates per 1000',
       main=list('Death rates in 1940 Virginia',cex=0.8))

#美化点图
dotplot(VADeaths,groups=FALSE,layout=c(1,4),origin=0,type=c('p','h'),
       mian=list('Death rates in 1940 virginia',cex=0.8),
       xlab='Death rates per 1000')
```

![image-20200312200243244](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315233114.png)

![image-20200312200527051](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315233114.png)

![image-20200312200935840](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315233124.png)

#### 2.6 直方图（histogram函数）

![image-20200312201102182](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315234430.png)

```R
histogram(~height|voice.part,data=singer,nint=17, #nint：划分份数
          layout=c(1,8),xlab='Height') 
```

![image-20200312201646100](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315234436.png)



#### 2.7 核密度图（densityplot函数）

![image-20200312201742900](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315234449.png)

```R
densityplot(~height|voice.part,data=singer,layout=c(1,8),
            xlab='Height',main='heights of New York Society singers')
#叠加图（核密度）
densityplot(~height|voice.part,data=singer,layout=c(1,8),plot.points=FALSE
            xlab='Height',main='heights of New York Society singers',
            lty=1:8,col=1:8,lwd=1.5)
```

![image-20200312202000887](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315234504.png)

![image-20200312202331004](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315234346.png)

#### 2.8  带状图（striplot函数）

![image-20200312202404454](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315234419.png)

```R
#绘制“Bass 2 歌手身高带状图”
nrow(singer[singer$voice.part=='Bass 2',]) #统计符合要求的数据长度
stripplot(~height,group=voice.part,data=singer,xlab='Height(inches)',
         main='height of New York Society singers',
         subset=(voice.part=='Bass 2'),jitter.data=TRUE)

```

![image-20200312203041275](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315234340.png)

#### 2.9 QQ图（qqmath函数）

![image-20200312203056699](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315234514.png)

```R
#绘制不同音域人群的身高QQ图
qqmath(~height|voice.part,data=singer,prepanel=prepanell.qqmathline,
      panel=function(...){
          panel.qqmathline(x,...)
          panel.qqmath(x,...)
      })
```

![image-20200312203329148](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315234537.png)

#### 2.10 箱线图（bwplot函数）

![image-20200312203617648](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235407.png)

![image-20200312204056419](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235407.png)

#### 2.11 散点图（xyplot函数）

```R
#散点图
xyplot(Sepal.Length~Sepal.Width|Species,data=iris)
#散点矩阵图
splom(iris[,1:4],groups=iris$Species,pscales=0,pch=1:3,
      varnames=colnames(iris)[1:4])
```

![image-20200312204335112](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000134.png)

#### 2.12 三维水平图（levelplot函数）

```R
data(Cars93,package='MASS')
cor.Car93 <- cor(Cars93[,!sapply(Cars93.is.factor)],use='pair') #判断是不是因子型数据
levelplot(cor.Cars93,scales=list(x=list(rot=90)))
```

![image-20200312204732816](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235421.png)

#### 2.13 三维等高线（contourplot函数）

```R
contourplot(volcano,cuts=20)
```

![image-20200312204826900](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235435.png)

#### 2.14 三维散点图（cloud函数）

![image-20200312204919717](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235440.png)

![image-20200312204937011](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235452.png)



#### 2.15 三维曲面图（wireframe函数）

![image-20200312205015809](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235508.png)

```R
par.set <- list(axis.line=list(col='transparent'),clip=list(panel='off'))#取出边框
wireframe(volcano,shade=TRUE,par.setting=par.set,aspect=c(61/87,0.4))#绘制三维曲面图
```



### 三、ggplot2包（按图层作图）

#### 3.1 定义

![image-20200313145104106](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235508.png)

#### 3.2 函数使用（qplot函数）

![image-20200313145222397](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235515.png)

![image-20200313145243068](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235524.png)

#### 3.3 绘制箱线图

![image-20200313145423439](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235538.png)

说明：

1. fill：按照某种标准，进行分组展示

#### 3.4 绘制小提琴图

![image-20200313174046106](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235609.png)

#### 3.5 散点图

![image-20200313174502313](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235603.png)

说明：

- colour：按什么标准，进行分组统计
- shape：

#### 3.6 光滑曲线

![image-20200313174840313](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235614.png)

说明：

- geom：可以有多个值（即图形叠加）
- facets：按什么进行分类（一页多图）

#### 3.7 ggplot2包（ggplot函数）

![image-20200313175434345](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000152.png)

![image-20200313175955938](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000152.png)

![image-20200313180227668](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235639.png)

#### 3.8 绘制画布（ggplot包）

![image-20200313180332286](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235639.png)

- colour和shape：设置其中一个就可以了

#### 3.9 ggplot2中的画图函数

![image-20200313180733430](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235644.png)

#### 3.10 散点图

![image-20200313180826892](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235648.png)

或者

![image-20200313181040387](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235706.png)

![image-20200313181413468](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235702.png)

#### 3.11 统计变换

![image-20200313181454973](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235714.png)

![image-20200313181821234](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235719.png)

#### 3.12 标尺设置

![image-20200313182019183](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235731.png)

![image-20200313182054177](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000203.png)

![image-20200313183123821](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000228.png)

![image-20200313183152972](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235743.png)

#### 3.13 坐标系转换（coord_catesian函数）

![image-20200313183423464](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235748.png)

![image-20200313183439188](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235757.png)

说明：

- factor(1)：第一个因子

![image-20200313184020841](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235804.png)

![image-20200313184120079](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235811.png)

![image-20200313184326141](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235828.png)

#### 3.14 分面（facet_grid函数）

![image-20200313184411740](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235828.png)

![image-20200313184435388](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235828.png)

![image-20200313185212983](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235905.png)

![image-20200313185407780](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235910.png)

![image-20200313185453817](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315235936.png)

#### 3.15 图像的保存

![image-20200313185926317](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000228.png)

![image-20200313190238629](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000241.png)

### 四、交互式绘图工具

![image-20200313190334455](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000254.png)

#### 4.1 rCharts包

![image-20200313190433359](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000301.png)

绘制散点图

![image-20200313190444715](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000307.png)

说明：

- names(iris)     #属性名进行修改

![image-20200313202134215](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000313.png)

#### 4.2 nPlot函数（动态web绘图）

![image-20200313202241040](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000010.png)

- paste0()：粘贴，可以用来添加前缀、后缀。

![image-20200313202258889](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000016.png)

![image-20200313203003468](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000022.png)

#### 4.3 hPlot函数

![image-20200313203159435](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000029.png)

- zoomType：实现缩放的轴（x或y）
- exporting：是否使用导出和打印功能

![image-20200313204436951](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000034.png)

#### 4.4 mPlot函数

![image-20200313204556547](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000322.png)

- transform：数据进行转换

![image-20200313205454118](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000045.png)

![image-20200313205522805](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200316000045.png)

### 五、htmlwddgets网页化分享

![image-20200315212518842](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315212544.png)

#### 5.1 leaflet包

![image-20200315212728948](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315212730.png)

说明：

- %>% ：管道输入符

![image-20200315213425864](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315213853.png)

#### 5.2 dygraphs包

![image-20200315213507579](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315225959.png)

![image-20200315213658062](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230004.png)

#### 5.3 plotly（ggplot2-->交互式效果）

![image-20200315213805597](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230023.png)

![image-20200315220357886](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230036.png)

![image-20200315221116325](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230048.png)

#### 5.4 DT包

![image-20200315221137493](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230116.png)

![image-20200315221301677](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230125.png)

#### 5.5 networkD3（网络图）

![image-20200315221344986](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230340.png)

![image-20200315221808885](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230359.png)

![image-20200315222157344](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230412.png)



### 六、shiny实现交互的web应用（low得一批）

#### 6.1 shiny包

![image-20200315222352450](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230424.png)

![image-20200315222642087](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230436.png)

![image-20200315222656654](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230220.png)

![image-20200315223245847](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230232.png)

![image-20200315223324317](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315225924.png)

![image-20200315223439626](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315225934.png)

**绘制直方图**

![image-20200315223553764](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230301.png)

![image-20200315224725131](https://raw.githubusercontent.com/Caiguangnan/ProgrammerToolBox/master/img/20200315230301.png)